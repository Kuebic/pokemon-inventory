<!DOCTYPE html>
<html>
<head>
    <title>Clear Service Workers</title>
</head>
<body>
    <h1>Clearing Service Workers...</h1>
    <div id="status"></div>
    <script>
        // Unregister all service workers
        navigator.serviceWorker.getRegistrations().then(function(registrations) {
            for(let registration of registrations) {
                registration.unregister().then(function(success) {
                    console.log('Unregistered:', registration.scope);
                    document.getElementById('status').innerHTML += 
                        '<p>Unregistered: ' + registration.scope + '</p>';
                });
            }
        });

        // Clear all caches
        caches.keys().then(function(names) {
            for (let name of names) {
                caches.delete(name).then(function(success) {
                    console.log('Deleted cache:', name);
                    document.getElementById('status').innerHTML += 
                        '<p>Deleted cache: ' + name + '</p>';
                });
            }
        });

        // Redirect after cleanup
        setTimeout(function() {
            window.location.href = '/';
        }, 2000);
    </script>
</body>
</html>